CREATE TABLE IF NOT EXISTS CHARACTER_LOCATIONS (
character_id SERIAL UNIQUE,
character_pos_x double precision NOT NULL DEFAULT 0.0,
character_pos_y double precision NOT NULL DEFAULT 0.0,
created timestamp,
last_changed timestamp);

DO $$ DECLARE
    tr_exists integer := (SELECT 1 FROM information_schema.triggers WHERE trigger_name = lower('TR_CHARACTER_LOCATIONS_CREATED'));
BEGIN
    IF tr_exists = 1 THEN
       		RAISE NOTICE 'TRIGGER ALREADY EXISTS';
		ELSE
			CREATE TRIGGER TR_CHARACTER_LOCATIONS_CREATED BEFORE INSERT
			ON ACCOUNTS FOR EACH ROW EXECUTE PROCEDURE row_created();
    END IF;
END $$;

DO $$ DECLARE
    tr_exists integer := (SELECT 1 FROM information_schema.triggers WHERE trigger_name = lower('TR_CHARACTER_LOCATIONS_LAST_CHANGED'));
BEGIN
    IF tr_exists = 1 THEN
       		RAISE NOTICE 'TRIGGER ALREADY EXISTS';
		ELSE
			CREATE TRIGGER TR_CHARACTER_LOCATIONS_LAST_CHANGED BEFORE INSERT
			ON ACCOUNTS FOR EACH ROW EXECUTE PROCEDURE row_changed();
    END IF;
END $$;
